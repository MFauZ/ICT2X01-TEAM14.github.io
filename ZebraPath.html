<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Zebra Crossing</title>
	<script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
	<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script>

	<script>
		function showquiz1() {
			var ele = document.getElementById("quiz1-answerFalse");
			var quiz1 = document.getElementById('quiz1wrong');
			quiz1.setAttribute('visible', true);
		}

		function showquiz2() {
			var ele = document.getElementById("quiz2-answerFalse");
			var quiz2 = document.getElementById('quiz2wrong');
			quiz2.setAttribute('visible', true);
		}

		function showquiz3() {
			var quiz3 = document.getElementById('quiz3wrong');
			quiz3.setAttribute('visible', true);
		}

		function menupage() {
			window.location.href = "index.html";
		}

		function retry() {
			window.location.href = "ZebraPath.html";
		}

		function displayoption() {
			var menu = document.getElementById("backToMenu");
			var retry = document.getElementById("retry");
			var scene = document.getElementById("endScenario");

			menu.setAttribute('visible', true);
			retry.setAttribute('visible', true);
			scene.setAttribute('visible', true);
		}
	</script>
</head>
<a-scene>
	<a-assets>
		<a-mixin id="checkpoint"></a-mixin>
		<a-mixin id="checkpoint-hovered" color="#6CEEB5"></a-mixin>

		<a-assets-item id="veh-mini1" src="sceneModels\veh-mini1.ply"></a-assets-item>
		<a-assets-item id="veh-mini2" src="sceneModels\veh-mini2.ply"></a-assets-item>
		<a-assets-item id="veh-mini3" src="sceneModels\veh-mini3.ply"></a-assets-item>
		<a-assets-item id="veh-mini4" src="sceneModels\veh-mini4.ply"></a-assets-item>
		<a-assets-item id="veh-mini5" src="sceneModels\veh-mini5.ply"></a-assets-item>

		<a-assets-item id="obj_tree1" src="sceneModels\obj_tree1.ply"></a-assets-item>
		<a-assets-item id="obj_tree2" src="sceneModels\obj_tree2.ply"></a-assets-item>
		<a-assets-item id="obj_tree4" src="sceneModels\obj_tree4.ply"></a-assets-item>

		<a-assets-item id="cab1" src="sceneModels\cab1.ply"></a-assets-item>
		<a-assets-item id="car1" src="sceneModels\car1.ply"></a-assets-item>
		<a-assets-item id="car5" src="sceneModels\car5.ply"></a-assets-item>
		<a-assets-item id="truck1" src="sceneModels\truck1.ply"></a-assets-item>
		<a-assets-item id="bus" src="sceneModels\bus.ply"></a-assets-item>
		<a-assets-item id="busstop" src="sceneModels\busstop.ply"></a-assets-item>

		<a-assets-item id="sidewalk" src="sceneModels\sidewalk5.ply"></a-assets-item>

		<img id="quiz1Img" src="images/quiz1rules.PNG">
		<img id="quiz2Img" src="images/quiz2rules.PNG">
		<img id="quiz3Img" src="images/quiz3rules.PNG">
		<img id="hdbPlane" src="images/HDB1.png">
		<img id="hdbPlane2" src="images/HDB2.png">
	</a-assets>

	<!--Skybox-->
	<a-sky color="#cef4ff"></a-sky>

	<!-- PCN left grass -->
	<a-plane src="images\textures\env_grass2e_texture1.png" repeat="3 30" position="3 0 -14" rotation="-90 0 0" width="30"
	 height="100"></a-plane>

	<!-- Road left grass -->
	<a-plane src="images\textures\sgroad.jpg" repeat="2 100" position="-2 0.02 -4" rotation="-90 0 0" width="10" height="80"
	 shadow="" material="" geometry=""></a-plane>

	<a-plane src="images\textures\zebracrossing.jpg" position="-1.95 0.25 9.53" rotation="-90 0 0" shadow="" material="src:images\textures\zebracrossing.jpg;repeat:3 1"
	 geometry="primitive:plane;width:9.2;height:2.5"></a-plane>

	<a-entity id="transparentAtTraffic" checkpoint="" position="7.39 0.71 9" geometry="primitive:octahedron;height:1.22;width:1.82;depth:1.68"
	 material="side:double;transparent:true;opacity:0.5;visible:true;color:#00ffff" scale="0.5 0.5 0.5" rotation="0 0 0"></a-entity>

	<a-entity id="transparentAtBridge" checkpoint="" position="-7.13 0.56 9.2" geometry="primitive:octahedron;height:1.22;width:1.82;depth:1.68"
	 material="side:double;transparent:true;opacity:0.5;visible:true;color:#00ffff" scale="0.5 0.5 0.5" onclick="displayoption()"
	 rotation="-90 0 0"></a-entity>

	<!-- Player -->
	<a-entity position="6 0 35" id="rig" movement-controls="controls: checkpoint" checkpoint-controls="mode: animate">
		<a-entity camera position="0 1 0" look-controls="pointerLockEnabled: true">
			<a-entity cursor="fuse: true;" position="0 0 -1" geometry="primitive: ring; radiusInner: 0.015; radiusOuter: 0.03;"
			 material="color: red">
				<a-animation begin="click" easing="ease-in" attribute="scale" dur="150" fill="backwards" from="0.1 0.1 0.1" to="1 1 1">
				</a-animation>
				<a-animation begin="fusing" easing="ease-in" attribute="scale" dur="1500" fill="backwards" from="1 1 1" to="0.1 0.1 0.1">
				</a-animation>
			</a-entity>
		</a-entity>
	</a-entity>

	<a-entity id="quiz1-question" position="5.84 1.5 22" geometry="primitive:plane;height:0.4;width:2.92" material="color:black"
	 text="width:2.5;value:Proceed to zebra crossing to cross the road?;align:center" position="0 0 .5">
	</a-entity>

	<a-entity id="quiz2-question" position="5 2 6.8" rotation="0 45 0" geometry="primitive:plane;height:0.5;width:3" material="color:black"
	 text="width:3.84;value:Should you dismount your bike?; align: center">
	</a-entity>

	<a-entity id="quiz3-question" position="1.3 2 9.13" geometry="primitive:plane;height:0.5;width:2.92" material="color:black"
	 text="width:3;value:Should you check clear before crossing?; align:center" rotation="0 90 0" position="0 0 .2">
	</a-entity>

	<a-entity id="startScenario" checkpoint="" position="6 1 33.3" color="#E6FF00" material="color:#ffffff;opacity:0.7;transparent:true"
	 geometry="primitive:plane;height:0.3;width:1" text="value:Start Scenario;color:#000000;align:center;width:2.8">
	</a-entity>

	<a-entity id="startScenario-2" checkpoint="" position="5.85 0.91 24" color="#E6FF00" material="color:#ffffff;opacity:0.7;transparent:true"
	 geometry="primitive:plane;radius:0.28;height:0.5;width:2" text="value:50m away from zebra crossing;color:#000000;align:center;width:2.8"></a-entity>

	<!-- Checkpoints -->
	<a-entity position="1 0 -10">
		<a-entity id="quiz1-answerTrue" checkpoint="" position="4 0.82 32" material="color:green;opacity:0.8;transparent:true"
		 geometry="primitive:circle;radius:0.4;height:5;width:2.5" text="width:5;value:Yes;zOffset:0;align:center">
		</a-entity>

		<a-entity id="quiz1-answerFalse" position="5.50 0.82 32" material="color:red;opacity:0.8;transparent:true" geometry="primitive:circle;radius:0.4;height:5;width:2.5"
		 text="width:5;value:No;zOffset:0;align:center" onclick="showquiz1()">
		</a-entity>

		<a-image id="quiz1wrong" src="#quiz1Img" position="5 2.61 32.03" height="1.16" width="4.38" geometry="primitive:plane"
		 visible="false"></a-image>

		<a-entity id="quiz2-answerTrue" checkpoint="" position="3.1 0.82 17.1" rotation="0 45 0" material="color:green;opacity:0.8;transparent:true"
		 geometry="primitive:circle;radius:0.4;height:5;width:2.5" text="width:5;value:Yes;align:center">
		</a-entity>

		<a-entity id="quiz2-answerFalse" position="4.4 0.82 15.8" rotation="0 45 0" material="color:red;opacity:0.8;transparent:true"
		 geometry="primitive:circle;radius:0.4;height:5;width:2.5" text="width:5;value:No;align:center" onclick="showquiz2()">
		</a-entity>

		<a-image id="quiz2wrong" src="#quiz2Img" position="3.7 2.75 16.5" rotation="0 45 0" height="1" width="2.15" geometry="primitive:plane"
		 visible="false"></a-image>

		<a-entity id="quiz3-answerTrue" checkpoint="" position="0 0.82 19.7" material="color:green;opacity:0.8;transparent:true"
		 geometry="primitive:circle;radius:0.4;height:5;width:2.5" text="width:5;value:Yes;align:center" rotation="0 90 0">
		</a-entity>

		<a-image id="quiz3wrong" src="#quiz3Img" position="0 3.07 19.05" height="1" width="2.15" geometry="primitive:plane"
		 visible="false" rotation="0 90 0"></a-image>

		<a-entity id="quiz3-answerFalse" position="0 0.82 18.59" material="color:red;opacity:0.8;transparent:true"
		 geometry="primitive:circle;radius:0.4;height:5;width:2.5" text="width:5;value:No;align:center" rotation="0 90 0" onclick="showquiz3()">
		</a-entity>

		<a-entity id="backToMenu" position="-11.1 0.82 20.55" material="color:red;opacity:0.8;transparent:true" geometry="primitive:plane;height:0.65;width:1.15"
		 text="width:5;value:Menu;align:center" visible="false" rotation="0 90 0" onclick="menupage()">
		</a-entity>

		<a-entity id="retry" position="-11.1 0.82 18.7" material="color:red;opacity:0.8;transparent:true" geometry="primitive:plane;height:0.65;width:1.15"
		 text="width:5;value:Try Again;align:center" visible="false" rotation="0 90 0" onclick="retry()">
		</a-entity>

		<a-entity id="endScenario" checkpoint="" position="-11.1 1.8 19.6" color="#E6FF00" material="color:#ffffff;opacity:0.7;transparent:true"
		 geometry="primitive:plane;radius:0.28;height:0.8;width:3.71" text="value:You have cleared the scenario!;color:#000000;align:center; zOffset: 0.1"
		 visible="false" rotation="0 90 0"></a-entity>
	</a-entity>

	<!-- Character -->
	<a-entity ply-model="src:#obj_tree4" position="3.50 0 -15" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree1" position="3.50 0 -10" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree2" position="3.50 0 -5" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree2" position="3.50 0 0" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree4" position="3.50 0 5" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>

	<!-- PCN right trees -->
	<a-entity ply-model="src:#obj_tree4" position="8 0 -20" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree4" position="8 0 -15" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree1" position="8 0 -10" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#obj_tree4" position="8 0 -5" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>

	<!-- vehicles -->
	<a-entity ply-model="src:#bus" position="-5.47 0 0.54" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>
	<a-entity ply-model="src:#busstop" position="-7.5 0 2.95" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>

	<!-- HDB  -->
	<a-image src="#hdbPlane" height="100" width="25" position="-11.8 12 -14" rotation="0 -90 -90" repeat="1 2"></a-image>
	<a-image src="#hdbPlane2" height="100" width="25" position="18 12 -14" rotation="0 -90 -90" repeat="1 2"></a-image>

	<!-- Decoration -->

	<!-- PCN Left-->
	<a-entity ply-model="src:#sidewalk" position="5 0 -39" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -34" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -29" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -24" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -19" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -14" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -9" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 -4" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 1" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 6" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 11" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 16" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 21" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 26" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="5 0 31" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>

	<!-- PCN Right-->
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -39" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -34" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -29" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -24" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -19" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -14" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -9" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 -4" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 1" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 6" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 11" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 16" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 21" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 26" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>
	<a-entity ply-model="src:#sidewalk" position="6.5 0 31" scale="0.1 0.1 0.1" rotation="-90 90 0"></a-entity>

	<!-- Walkway to park -->
	<a-entity ply-model="src:#sidewalk" position="10.5 0 21.73" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>

	<!-- Walkway to park -->
	<a-entity ply-model="src:#sidewalk" position="10.5 0 6.8" scale="0.1 0.1 0.1" rotation="-90 0 0"></a-entity>

	<a-entity id="car1" class="non-clickable" position="-0.30 0 -39" ply-model="src:#car1" rotation="-90 0 180" scale="0.1 0.1 0.1">
		<a-animation attribute="position" dur="5000" from="-3.40 0 -48.13" to="-3.40 0 28" repeat="indefinite" easing="linear"></a-animation>
	</a-entity>

	<a-entity id="car5" class="non-clickable" position="-0.30 0 -39" ply-model="src:#car5" rotation="-90 0 0" scale="0.1 0.1 0.1">
		<a-animation attribute="position" dur="5000" from="0.30 0 29.89" to="-0.30 0 -39" repeat="indefinite" easing="linear"></a-animation>
	</a-entity>
</a-scene>

</html>